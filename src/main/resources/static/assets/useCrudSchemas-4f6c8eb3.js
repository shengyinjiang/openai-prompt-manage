import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-5a7479c4.js";import{u as a,a as t,_ as o}from"./useCrudSchemas-d36e6dc1.js";import{aD as l,d as s,aE as i,k as n,V as r,$ as p,aF as m,r as c,o as d,h as u,w as g,g as b,a as f,e as h,S as _,t as v}from"./index-9270c606.js";import{E as w}from"./el-button-22a05afe.js";import{E as D}from"./el-tag-9aa246f8.js";import{_ as S}from"./Table.vue_vue_type_script_lang-0947e5f2.js";import"./el-popper-ba22550a.js";import"./index-09f72bc0.js";import"./useForm-2db1ec20.js";import"./el-input-b60eef14.js";import"./tsxHelper-1ebae244.js";import"./el-divider-1e7c27ae.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./tree-c22130c7.js";import"./vnode-e356a220.js";const j=e=>l.get({url:"/example/list",params:e}),x=e=>l.post({url:"/example/delete",data:{ids:e}}),y={class:"mb-10px"},P=s({__name:"useCrudSchemas",setup(l){const s=i(),{register:P,tableObject:C,methods:R}=a({getListApi:j,delListApi:x,response:{list:"list",total:"total"}}),{getList:k,setSearchParams:z}=R;k();const{t:E}=n(),L=r([{field:"index",label:E("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:E("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:E("tableDemo.author")},{field:"display_time",label:E("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:E("tableDemo.importance"),formatter:(e,a,t)=>p(D,{type:1===t?"success":2===t?"warning":"danger"},(()=>E(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:s.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${E("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${E("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await m()).data}},{field:"pageviews",label:E("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:E("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:E("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:H}=t(L),Y=c(!1),A=async(e,a)=>{var t;C.currentRow=e;const{delList:o,getSelections:l}=R,s=await l();Y.value=!0,await o(a?s.map((e=>e.id)):[null==(t=C.currentRow)?void 0:t.id],a).finally((()=>{Y.value=!1}))};return(a,t)=>(d(),u(f(e),null,{default:g((()=>[b(f(o),{schema:f(H).searchSchema,onSearch:f(z),onReset:f(z)},null,8,["schema","onSearch","onReset"]),h("div",y,[b(f(w),{loading:Y.value,type:"danger",onClick:t[0]||(t[0]=e=>A(null,!0))},{default:g((()=>[_(v(f(E)("exampleDemo.del")),1)])),_:1},8,["loading"])]),b(f(S),{pageSize:f(C).pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>f(C).pageSize=e),currentPage:f(C).currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>f(C).currentPage=e),columns:f(H).tableColumns,data:f(C).tableList,loading:f(C).loading,pagination:{total:f(C).total},onRegister:f(P)},{action:g((({row:e})=>[b(f(w),{type:"danger",onClick:a=>A(e,!1)},{default:g((()=>[_(v(f(E)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{P as default};
