import{bp as e,b7 as t,s as a,bd as o,db as l,d0 as n,dc as s,a as i,aw as r,r as u,aE as p,bf as d,$ as c,az as f,b5 as v,a0 as m,b6 as y,bG as b,d as x,P as h,A as g,aA as w,bL as S,B as k,av as C,cf as z,dd as E,de as I,bC as $,N as P,R as F,be as N,bu as _,c3 as T,F as V,I as A,o as B,c as M,y as j,Y as R,n as H,v as K,e as O,h as W,w as L,x as G,E as q,G as D,g as U,bR as Y,bN as Z,bK as J,t as Q,z as X,_ as ee,bn as te,K as ae}from"./index-fd4ebc93.js";import{a as oe,b as le}from"./el-button-e210cb9e.js";import{i as ne}from"./el-popper-510a25b6.js";let se;const ie=t=>{var a;if(!e)return 0;if(void 0!==se)return se;const o=document.createElement("div");o.className=`${t}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const l=o.offsetWidth;o.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",o.appendChild(n);const s=n.offsetWidth;return null==(a=o.parentNode)||a.removeChild(o),se=l-s,se};function re(t,a){if(!e)return;if(!a)return void(t.scrollTop=0);const o=[];let l=a.offsetParent;for(;null!==l&&t!==l&&t.contains(l);)o.push(l),l=l.offsetParent;const n=a.offsetTop+o.reduce(((e,t)=>e+t.offsetTop),0),s=n+a.offsetHeight,i=t.scrollTop,r=i+t.clientHeight;n<i?t.scrollTop=n:s>r&&(t.scrollTop=s-t.clientHeight)}const ue="update:modelValue",pe="change",de="input",ce=e=>["",...t].includes(e),fe=()=>e&&/firefox/i.test(window.navigator.userAgent),ve=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),me=["class","style"],ye=/^on[A-Z]/,be=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n}=e,s=a((()=>((null==n?void 0:n.value)||[]).concat(me))),i=o();return a(i?()=>{var e;return l(Object.entries(null==(e=i.proxy)?void 0:e.$attrs).filter((([e])=>!(s.value.includes(e)||t&&ye.test(e)))))}:()=>({}))},xe=e=>(t,a)=>he(t,a,i(e)),he=(e,t,a)=>p(a,e,e).replace(/\{(\w+)\}/g,((e,a)=>{var o;return`${null!=(o=null==t?void 0:t[a])?o:`{${a}}`}`})),ge=()=>{const e=n("locale");return(e=>({lang:a((()=>i(e).name)),locale:r(e)?e:u(e),t:xe(e)}))(a((()=>e.value||s)))};let we;const Se=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${fe()?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,ke=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ce(e,t=1,a){var o;we||(we=document.createElement("textarea"),document.body.appendChild(we));const{paddingSize:l,borderSize:n,boxSizing:s,contextStyle:i}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),l=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ke.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:l,boxSizing:a}}(e);we.setAttribute("style",`${i};${Se}`),we.value=e.value||e.placeholder||"";let r=we.scrollHeight;const u={};"border-box"===s?r+=n:"content-box"===s&&(r-=l),we.value="";const p=we.scrollHeight-l;if(d(t)){let e=p*t;"border-box"===s&&(e=e+l+n),r=Math.max(e,r),u.minHeight=`${e}px`}if(d(a)){let e=p*a;"border-box"===s&&(e=e+l+n),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=we.parentNode)||o.removeChild(we),we=void 0,u}const ze=c({id:{type:String,default:void 0},size:f,disabled:Boolean,modelValue:{type:v([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:v([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:m},prefixIcon:{type:m},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:v([Object,Array,String]),default:()=>y({})}}),Ee={[ue]:e=>b(e),input:e=>b(e),change:e=>b(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Ie=["role"],$e=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Pe=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Fe=x({name:"ElInput",inheritAttrs:!1});const Ne=ae(ee(x({...Fe,props:ze,emits:Ee,setup(t,{expose:o,emit:l}){const n=t,s=h(),r=g(),p=a((()=>{const e={};return"combobox"===n.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),d=a((()=>["textarea"===n.type?ae.b():ee.b(),ee.m(b.value),ee.is("disabled",x.value),ee.is("exceed",Te.value),{[ee.b("group")]:r.prepend||r.append,[ee.bm("group","append")]:r.append,[ee.bm("group","prepend")]:r.prepend,[ee.m("prefix")]:r.prefix||n.prefixIcon,[ee.m("suffix")]:r.suffix||n.suffixIcon||n.clearable||n.showPassword,[ee.bm("suffix","password-clear")]:Ee.value&&Fe.value},s.class])),c=a((()=>[ee.e("wrapper"),ee.is("focus",re.value)])),f=be({excludeKeys:a((()=>Object.keys(p.value)))}),{form:v,formItem:m}=oe(),{inputId:y}=le(n,{formItemContext:m}),b=w(),x=S(),ee=k("input"),ae=k("textarea"),se=C(),ie=C(),re=u(!1),pe=u(!1),de=u(!1),ce=u(!1),fe=u(),me=C(n.inputStyle),ye=a((()=>se.value||ie.value)),xe=a((()=>{var e;return null!=(e=null==v?void 0:v.statusIcon)&&e})),he=a((()=>(null==m?void 0:m.validateState)||"")),ge=a((()=>he.value&&z[he.value])),we=a((()=>ce.value?E:I)),Se=a((()=>[s.style,n.inputStyle])),ke=a((()=>[n.inputStyle,me.value,{resize:n.resize}])),ze=a((()=>ne(n.modelValue)?"":String(n.modelValue))),Ee=a((()=>n.clearable&&!x.value&&!n.readonly&&!!ze.value&&(re.value||pe.value))),Fe=a((()=>n.showPassword&&!x.value&&!n.readonly&&!!ze.value&&(!!ze.value||re.value))),Ne=a((()=>n.showWordLimit&&!!f.value.maxlength&&("text"===n.type||"textarea"===n.type)&&!x.value&&!n.readonly&&!n.showPassword)),_e=a((()=>Array.from(ze.value).length)),Te=a((()=>!!Ne.value&&_e.value>Number(f.value.maxlength))),Ve=a((()=>!!r.suffix||!!n.suffixIcon||Ee.value||n.showPassword||Ne.value||!!he.value&&xe.value)),[Ae,Be]=function(e){const t=u();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:l}=e.value;if(null==a||null==o)return;const n=l.slice(0,Math.max(0,a)),s=l.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:l,beforeTxt:n,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:l,selectionStart:n}=t.value;if(null==o||null==l||null==n)return;let s=a.length;if(a.endsWith(l))s=a.length-l.length;else if(a.startsWith(o))s=o.length;else{const e=o[n-1],t=a.indexOf(e,n-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(se);$(ie,(e=>{if(!Ne.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;fe.value={right:`calc(100% - ${a+15+6}px)`}}));const Me=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&ie.value)if(a){const e=te(a)?a.minRows:void 0,t=te(a)?a.maxRows:void 0;me.value={...Ce(ie.value,e,t)}}else me.value={minHeight:Ce(ie.value).minHeight}},je=()=>{const e=ye.value;e&&e.value!==ze.value&&(e.value=ze.value)},Re=async e=>{Ae();let{value:t}=e.target;n.formatter&&(t=n.parser?n.parser(t):t,t=n.formatter(t)),de.value||(t!==ze.value?(l(ue,t),l("input",t),await F(),je(),Be()):je())},He=e=>{l("change",e.target.value)},Ke=e=>{l("compositionstart",e),de.value=!0},Oe=e=>{var t;l("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";de.value=!ve(o)},We=e=>{l("compositionend",e),de.value&&(de.value=!1,Re(e))},Le=()=>{ce.value=!ce.value,Ge()},Ge=async()=>{var e;await F(),null==(e=ye.value)||e.focus()},qe=e=>{re.value=!0,l("focus",e)},De=e=>{var t;re.value=!1,l("blur",e),n.validateEvent&&(null==(t=null==m?void 0:m.validate)||t.call(m,"blur").catch((e=>N())))},Ue=e=>{pe.value=!1,l("mouseleave",e)},Ye=e=>{pe.value=!0,l("mouseenter",e)},Ze=e=>{l("keydown",e)},Je=()=>{l(ue,""),l("change",""),l("clear"),l("input","")};return P((()=>n.modelValue),(()=>{var e;F((()=>Me())),n.validateEvent&&(null==(e=null==m?void 0:m.validate)||e.call(m,"change").catch((e=>N())))})),P(ze,(()=>je())),P((()=>n.type),(async()=>{await F(),je(),Me()})),_((()=>{!n.formatter&&n.parser,je(),F(Me)})),o({input:se,textarea:ie,ref:ye,textareaStyle:ke,autosize:T(n,"autosize"),focus:Ge,blur:()=>{var e;return null==(e=ye.value)?void 0:e.blur()},select:()=>{var e;null==(e=ye.value)||e.select()},clear:Je,resizeTextarea:Me}),(e,t)=>V((B(),M("div",D(i(p),{class:i(d),style:i(Se),role:e.containerRole,onMouseenter:Ye,onMouseleave:Ue}),[j(" input "),"textarea"!==e.type?(B(),M(R,{key:0},[j(" prepend slot "),e.$slots.prepend?(B(),M("div",{key:0,class:H(i(ee).be("group","prepend"))},[K(e.$slots,"prepend")],2)):j("v-if",!0),O("div",{class:H(i(c))},[j(" prefix slot "),e.$slots.prefix||e.prefixIcon?(B(),M("span",{key:0,class:H(i(ee).e("prefix"))},[O("span",{class:H(i(ee).e("prefix-inner")),onClick:Ge},[K(e.$slots,"prefix"),e.prefixIcon?(B(),W(i(q),{key:0,class:H(i(ee).e("icon"))},{default:L((()=>[(B(),W(G(e.prefixIcon)))])),_:1},8,["class"])):j("v-if",!0)],2)],2)):j("v-if",!0),O("input",D({id:i(y),ref_key:"input",ref:se,class:i(ee).e("inner")},i(f),{type:e.showPassword?ce.value?"text":"password":e.type,disabled:i(x),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:n.form,onCompositionstart:Ke,onCompositionupdate:Oe,onCompositionend:We,onInput:Re,onFocus:qe,onBlur:De,onChange:He,onKeydown:Ze}),null,16,$e),j(" suffix slot "),i(Ve)?(B(),M("span",{key:1,class:H(i(ee).e("suffix"))},[O("span",{class:H(i(ee).e("suffix-inner")),onClick:Ge},[i(Ee)&&i(Fe)&&i(Ne)?j("v-if",!0):(B(),M(R,{key:0},[K(e.$slots,"suffix"),e.suffixIcon?(B(),W(i(q),{key:0,class:H(i(ee).e("icon"))},{default:L((()=>[(B(),W(G(e.suffixIcon)))])),_:1},8,["class"])):j("v-if",!0)],64)),i(Ee)?(B(),W(i(q),{key:1,class:H([i(ee).e("icon"),i(ee).e("clear")]),onMousedown:Z(i(J),["prevent"]),onClick:Je},{default:L((()=>[U(i(Y))])),_:1},8,["class","onMousedown"])):j("v-if",!0),i(Fe)?(B(),W(i(q),{key:2,class:H([i(ee).e("icon"),i(ee).e("password")]),onClick:Le},{default:L((()=>[(B(),W(G(i(we))))])),_:1},8,["class"])):j("v-if",!0),i(Ne)?(B(),M("span",{key:3,class:H(i(ee).e("count"))},[O("span",{class:H(i(ee).e("count-inner"))},Q(i(_e))+" / "+Q(i(f).maxlength),3)],2)):j("v-if",!0),i(he)&&i(ge)&&i(xe)?(B(),W(i(q),{key:4,class:H([i(ee).e("icon"),i(ee).e("validateIcon"),i(ee).is("loading","validating"===i(he))])},{default:L((()=>[(B(),W(G(i(ge))))])),_:1},8,["class"])):j("v-if",!0)],2)],2)):j("v-if",!0)],2),j(" append slot "),e.$slots.append?(B(),M("div",{key:1,class:H(i(ee).be("group","append"))},[K(e.$slots,"append")],2)):j("v-if",!0)],64)):(B(),M(R,{key:1},[j(" textarea "),O("textarea",D({id:i(y),ref_key:"textarea",ref:ie,class:i(ae).e("inner")},i(f),{tabindex:e.tabindex,disabled:i(x),readonly:e.readonly,autocomplete:e.autocomplete,style:i(ke),"aria-label":e.label,placeholder:e.placeholder,form:n.form,onCompositionstart:Ke,onCompositionupdate:Oe,onCompositionend:We,onInput:Re,onFocus:qe,onBlur:De,onChange:He,onKeydown:Ze}),null,16,Pe),i(Ne)?(B(),M("span",{key:0,style:X(fe.value),class:H(i(ee).e("count"))},Q(i(_e))+" / "+Q(i(f).maxlength),7)):j("v-if",!0)],64))],16,Ie)),[[A,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{pe as C,Ne as E,de as I,ue as U,be as a,fe as b,ce as c,ie as g,ve as i,re as s,ge as u};
