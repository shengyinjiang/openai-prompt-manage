import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-a037ce97.js";import{b as a,u as t,a as o,_ as l}from"./useCrudSchemas-c960b037.js";import{d as s,k as i,V as n,Z as r,r as m,o as p,h as c,w as d,g as u,a as g,e as b,S as f,t as h}from"./index-fd4ebc93.js";import{E as _}from"./el-button-e210cb9e.js";import{E as v}from"./el-tag-f909f789.js";import{_ as w}from"./Table.vue_vue_type_script_lang-6da48dea.js";import{r as D}from"./index-ed161512.js";import"./el-popper-510a25b6.js";import"./index-6469e796.js";import"./useForm-a96365b0.js";import"./el-input-8087ab66.js";import"./tsxHelper-102b0284.js";import"./el-divider-ee4cebcf.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./tree-0f59664d.js";import"./vnode-3f505451.js";import"./axios-44a859f9.js";const j=e=>D.get({url:"/example/list",params:e}),S=e=>D.post({url:"/example/delete",data:{ids:e}}),x={class:"mb-10px"},y=s({__name:"useCrudSchemas",setup(s){const y=a(),{register:P,tableObject:C,methods:z}=t({getListApi:j,delListApi:S,response:{list:"list",total:"total"}}),{getList:R,setSearchParams:k}=z;R();const{t:L}=i(),E=n([{field:"index",label:L("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:L("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:L("tableDemo.author")},{field:"display_time",label:L("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:L("tableDemo.importance"),formatter:(e,a,t)=>r(v,{type:1===t?"success":2===t?"warning":"danger"},(()=>L(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:y.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${L("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${L("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await(async()=>D.get({url:"/dict/one"}))()).data}},{field:"pageviews",label:L("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:L("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:L("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:Y}=o(E),H=m(!1),A=async(e,a)=>{var t;C.currentRow=e;const{delList:o,getSelections:l}=z,s=await l();H.value=!0,await o(a?s.map((e=>e.id)):[null==(t=C.currentRow)?void 0:t.id],a).finally((()=>{H.value=!1}))};return(a,t)=>(p(),c(g(e),null,{default:d((()=>[u(g(l),{schema:g(Y).searchSchema,onSearch:g(k),onReset:g(k)},null,8,["schema","onSearch","onReset"]),b("div",x,[u(g(_),{loading:H.value,type:"danger",onClick:t[0]||(t[0]=e=>A(null,!0))},{default:d((()=>[f(h(g(L)("exampleDemo.del")),1)])),_:1},8,["loading"])]),u(g(w),{pageSize:g(C).pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>g(C).pageSize=e),currentPage:g(C).currentPage,"onUpdate:currentPage":t[2]||(t[2]=e=>g(C).currentPage=e),columns:g(Y).tableColumns,data:g(C).tableList,loading:g(C).loading,pagination:{total:g(C).total},onRegister:g(P)},{action:d((({row:e})=>[u(g(_),{type:"danger",onClick:a=>A(e,!1)},{default:d((()=>[f(h(g(L)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{y as default};
